<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whispers in the Dark</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a0a1a 0%, #2d1b2e 50%, #1a0a1a 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #e8d5d5;
            position: relative;
            overflow: hidden;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(139, 0, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 50%, rgba(75, 0, 130, 0.1) 0%, transparent 50%);
            animation: pulse 8s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.8; }
        }

        .container {
            max-width: 800px;
            width: 90%;
            background: rgba(20, 10, 20, 0.9);
            border: 2px solid #8b4789;
            border-radius: 15px;
            box-shadow: 0 0 50px rgba(139, 71, 137, 0.3), inset 0 0 30px rgba(0, 0, 0, 0.5);
            position: relative;
            z-index: 1;
            backdrop-filter: blur(10px);
        }

        .header {
            text-align: center;
            padding: 30px;
            border-bottom: 2px solid #8b4789;
            background: linear-gradient(180deg, rgba(139, 0, 0, 0.2) 0%, transparent 100%);
        }

        .title {
            font-size: 2.5em;
            color: #d8a7d8;
            text-shadow: 0 0 20px rgba(216, 167, 216, 0.5), 0 0 40px rgba(139, 0, 0, 0.3);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .subtitle {
            font-size: 1em;
            color: #b8a0b8;
            font-style: italic;
        }

        .game-area {
            padding: 30px;
            min-height: 400px;
        }

        .welcome-screen, .gender-screen, .chat-area, .ending-screen {
            display: none;
        }

        .welcome-screen.active, .gender-screen.active, .chat-area.active, .ending-screen.active {
            display: block;
        }

        .language-buttons, .gender-buttons, .choice-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 30px;
        }

        button {
            padding: 15px 30px;
            font-size: 1.1em;
            background: linear-gradient(135deg, #4a2847 0%, #2a1a2a 100%);
            color: #e8d5d5;
            border: 2px solid #8b4789;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Georgia', serif;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        button:hover {
            background: linear-gradient(135deg, #6a3867 0%, #3a2a3a 100%);
            border-color: #b86bb8;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 71, 137, 0.4);
        }

        .welcome-text, .gender-text {
            font-size: 1.2em;
            line-height: 1.8;
            text-align: center;
            color: #d5c5d5;
        }

        .chat-messages {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 1px solid #5a3a5a;
        }

        .message {
            margin-bottom: 20px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.npc {
            text-align: left;
        }

        .message.player {
            text-align: right;
        }

        .message-content {
            display: inline-block;
            padding: 12px 18px;
            border-radius: 15px;
            max-width: 80%;
            line-height: 1.6;
        }

        .message.npc .message-content {
            background: linear-gradient(135deg, #4a1a4a 0%, #2a0a2a 100%);
            border: 1px solid #6a3a6a;
            box-shadow: 0 2px 10px rgba(139, 0, 0, 0.3);
        }

        .message.player .message-content {
            background: linear-gradient(135deg, #2a3a4a 0%, #1a2a3a 100%);
            border: 1px solid #4a5a6a;
            box-shadow: 0 2px 10px rgba(0, 100, 139, 0.3);
        }

        .npc-name {
            font-weight: bold;
            color: #d8a7d8;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .choices {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .choice-btn {
            padding: 12px 20px;
            font-size: 1em;
        }

        .ending-screen {
            text-align: center;
        }

        .ending-title {
            font-size: 2em;
            color: #d8a7d8;
            margin-bottom: 20px;
            text-shadow: 0 0 15px rgba(216, 167, 216, 0.5);
        }

        .ending-text {
            font-size: 1.2em;
            line-height: 1.8;
            margin-bottom: 30px;
            color: #d5c5d5;
        }

        .restart-btn {
            margin-top: 20px;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border: 1px solid #5a3a5a;
        }

        .stat {
            text-align: center;
        }

        .stat-label {
            font-size: 0.9em;
            color: #b8a0b8;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.3em;
            color: #d8a7d8;
            font-weight: bold;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #8b4789;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #b86bb8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">Whispers in the Dark</h1>
            <p class="subtitle">A Romantic Horror Tale</p>
        </div>
        
        <div class="game-area">
            <!-- Welcome Screen -->
            <div class="welcome-screen active">
                <p class="welcome-text">Choose your language / Pilih bahasa Anda</p>
                <div class="language-buttons">
                    <button onclick="setLanguage('en')">English</button>
                    <button onclick="setLanguage('id')">Bahasa Indonesia</button>
                </div>
            </div>

            <!-- Gender Selection Screen -->
            <div class="gender-screen">
                <p class="gender-text" id="genderPrompt"></p>
                <div class="gender-buttons">
                    <button onclick="setGender('female')" id="femaleBtn"></button>
                    <button onclick="setGender('male')" id="maleBtn"></button>
                </div>
            </div>

            <!-- Chat Area -->
            <div class="chat-area">
                <div class="stats">
                    <div class="stat">
                        <div class="stat-label" id="trustLabel">Trust</div>
                        <div class="stat-value" id="trustValue">50</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label" id="fearLabel">Fear</div>
                        <div class="stat-value" id="fearValue">50</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label" id="loveLabel">Love</div>
                        <div class="stat-value" id="loveValue">50</div>
                    </div>
                </div>
                <div class="chat-messages" id="chatMessages"></div>
                <div class="choices" id="choices"></div>
            </div>

            <!-- Ending Screen -->
            <div class="ending-screen">
                <h2 class="ending-title" id="endingTitle"></h2>
                <p class="ending-text" id="endingText"></p>
                <button class="restart-btn" onclick="restartGame()" id="restartBtn">Restart</button>
            </div>
        </div>
    </div>

    <script>
        let language = 'en';
        let playerGender = '';
        let currentScene = 0;
        let stats = {
            trust: 50,
            fear: 50,
            love: 50
        };
        let choices = [];

        const translations = {
            en: {
                genderPrompt: "Who are you in this story?",
                female: "Female",
                male: "Male",
                trustLabel: "Trust",
                fearLabel: "Fear",
                loveLabel: "Love",
                restart: "Restart Game"
            },
            id: {
                genderPrompt: "Siapa Anda dalam cerita ini?",
                female: "Perempuan",
                male: "Laki-laki",
                trustLabel: "Kepercayaan",
                fearLabel: "Ketakutan",
                loveLabel: "Cinta",
                restart: "Mulai Ulang"
            }
        };

        const story = {
            en: {
                scenes: [
                    {
                        npc: "???",
                        text: "You wake up in an abandoned mansion. Rain pounds against broken windows. A figure stands in the shadows...",
                        choices: [
                            { text: "Who are you?", next: 1, stats: { fear: 5 } },
                            { text: "Where am I?", next: 2, stats: { trust: -5 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "My name is Adrian. I've been waiting for you... for so long. You're not afraid of me, are you?",
                        choices: [
                            { text: "I'm not afraid", next: 3, stats: { trust: 10, love: 10 } },
                            { text: "Stay away from me!", next: 4, stats: { fear: 15, trust: -10 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "You're in my home. I brought you here because... I couldn't bear the loneliness anymore.",
                        choices: [
                            { text: "Let me go", next: 4, stats: { fear: 10 } },
                            { text: "You seem sad", next: 5, stats: { love: 10, trust: 5 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "Good. Because we're bound now, you and I. *He steps closer, moonlight revealing his pale, ethereal face* I died here 100 years ago, cursed to walk these halls. But you... you can see me.",
                        choices: [
                            { text: "This is impossible!", next: 6, stats: { fear: 15 } },
                            { text: "Tell me your story", next: 7, stats: { trust: 15, love: 5 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*His eyes flash with hurt and anger* You reject me like she did... Maybe you should join me in eternal darkness. *The room grows colder*",
                        choices: [
                            { text: "I'm sorry, I was scared", next: 7, stats: { trust: 10, love: 5, fear: 5 } },
                            { text: "Try to run", next: 8, stats: { fear: 20, trust: -20 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*His expression softens* Loneliness is a curse worse than death. I've watched the world change through these windows, unable to touch, to feel... until now. When you're near, I feel almost alive again.",
                        choices: [
                            { text: "How can I help you?", next: 9, stats: { love: 15, trust: 10 } },
                            { text: "This is too much", next: 10, stats: { fear: 10, love: -5 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*Shadows swirl around you* Fear is natural. But impossibility? *He touches your hand, his touch cold but gentle* Does this feel impossible?",
                        choices: [
                            { text: "No... it feels real", next: 9, stats: { love: 10, trust: 10, fear: -5 } },
                            { text: "You're a monster!", next: 8, stats: { fear: 20, trust: -20, love: -10 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*His eyes filled with centuries of sorrow* I was betrayed by the one I loved. She bound me here with a curse, promising I'd never know love again. But you broke through somehow...",
                        choices: [
                            { text: "We can break this curse together", next: 11, stats: { love: 20, trust: 15 } },
                            { text: "Tell me about the curse", next: 12, stats: { trust: 10, fear: 5 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*The mansion begins to crumble* RUN! The curse... it's pulling me back! *Dark tendrils wrap around him* I'm sorry... I should never have hoped...",
                        choices: [
                            { text: "Reach for him anyway", next: 13, stats: { love: 15, fear: 10 } },
                            { text: "Escape while you can", next: 14, stats: { fear: -10, trust: -20, love: -15 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*His voice echoes as he moves closer* There's a way to break my curse... but it requires a sacrifice. True love's willing surrender. Would you... stay with me? Forever?",
                        choices: [
                            { text: "I'll stay with you", next: 15, stats: { love: 30, trust: 20 } },
                            { text: "There must be another way", next: 16, stats: { trust: 10, fear: 5 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*He turns away* I understand. I'm asking too much. Perhaps it's better if you leave. I'll open the door for you. *His voice breaks* I'll be alone again, but you'll be safe.",
                        choices: [
                            { text: "Wait, I want to understand", next: 12, stats: { love: 10, trust: 15 } },
                            { text: "Leave through the door", next: 17, stats: { fear: -10, love: -10 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*His ethereal form glows brighter* Together... Yes! The curse feeds on isolation, on broken hearts. But with you believing in me, in us... I can feel it weakening!",
                        choices: [
                            { text: "Kiss him", next: 18, stats: { love: 25 } },
                            { text: "Take his hand", next: 19, stats: { love: 20, trust: 15 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*The darkness closes in* The curse requires a soul anchored by love. She cursed me because I rejected her obsession. Only someone who loves freely can break it... or share my fate.",
                        choices: [
                            { text: "I choose to break it with you", next: 18, stats: { love: 25, trust: 20 } },
                            { text: "We need more time", next: 20, stats: { fear: 10, trust: 5 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*You grab his hand as darkness consumes you both* No! Why did you— *His eyes widen* You're... warm. Your touch is breaking through! But the curse... it's taking you too!",
                        choices: [
                            { text: "I won't let you go!", next: 21, stats: { love: 30 } },
                            { text: "Fight to free yourself", next: 22, stats: { fear: 15, love: -10 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*You run into the storm. Behind you, the mansion crumbles. Adrian's anguished cry echoes through the night* I'll wait... forever if I must...",
                        choices: []
                    },
                    {
                        npc: "Adrian",
                        text: "*His form becomes more solid as you speak* You would... give up everything? Your life, your world? *Tears form in his eyes* I've waited so long to hear those words.",
                        choices: [
                            { text: "Kiss him to seal your fate", next: 23, stats: { love: 35 } },
                            { text: "Hesitate at the last moment", next: 24, stats: { fear: 15, trust: -10 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*Shadows writhe around you* There IS another way... but it's dangerous. An artifact in the basement can break any curse, but it requires facing your deepest fears. Will you try?",
                        choices: [
                            { text: "Let's do it together", next: 25, stats: { trust: 20, love: 15 } },
                            { text: "It's too risky", next: 26, stats: { fear: 15, love: -5 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*The door closes behind you. Freedom... but at what cost? Adrian's face haunts your dreams. Sometimes, in mirrors, you see him watching, waiting.*",
                        choices: []
                    },
                    {
                        npc: "Adrian",
                        text: "*Your lips meet his cold ones. Suddenly, warmth floods through both of you. Light explodes from where you touch. The curse shatters!* I'm... I'm free! We're free! Together!",
                        choices: []
                    },
                    {
                        npc: "Adrian",
                        text: "*You take his hand and the mansion transforms. Darkness fades to light. Flowers bloom on dead vines.* The curse... it's breaking! Your trust, your love... it was the key all along!",
                        choices: []
                    },
                    {
                        npc: "Adrian",
                        text: "*Time stretches. Days? Weeks? You're trapped in the mansion, searching for answers that seem to slip away. Adrian grows more desperate, more possessive.*",
                        choices: [
                            { text: "Confront him about his behavior", next: 27, stats: { trust: 10, fear: 10 } },
                            { text: "Look for escape secretly", next: 28, stats: { fear: 15, trust: -15 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*Light and darkness battle around you. Your love creates warmth, but the curse fights back. You're caught between worlds, between life and death, bound together forever in twilight.*",
                        choices: []
                    },
                    {
                        npc: "Adrian",
                        text: "*You pull away but too late. The curse grabs you. You feel yourself fading, becoming like him—trapped but together. He holds you as you transform.* I'm sorry... at least we'll have eternity.",
                        choices: []
                    },
                    {
                        npc: "Adrian",
                        text: "*The kiss breaks the curse completely. He becomes fully human again, warm and alive. But as the sun rises, you realize... you gave up your mortality. You're the ghost now. He's free, but the price...*",
                        choices: []
                    },
                    {
                        npc: "Adrian",
                        text: "*You hesitate. In that moment of doubt, the curse seizes the opportunity. Adrian is pulled into deeper darkness. 'Your doubt condemned me,' he whispers before vanishing. The mansion collapses. You escape, but his voice haunts you forever.*",
                        choices: []
                    },
                    {
                        npc: "Adrian",
                        text: "*In the basement, you face illusions of your greatest fears. But Adrian is beside you, fighting them together. You reach the artifact—a mirror showing true love. You both reach for it...*",
                        choices: [
                            { text: "Break the mirror together", next: 29, stats: { love: 30, trust: 25 } },
                            { text: "Look into it first", next: 30, stats: { trust: 15, fear: 10 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*You back away from the basement door. Adrian's hope dies in his eyes. 'I understand,' he says coldly. 'Leave. I release you.' But as you go, you hear him whisper: 'I'll always love you.'*",
                        choices: []
                    },
                    {
                        npc: "Adrian",
                        text: "*'You're right,' he says, tears streaming. 'I'm losing myself to the curse again. Help me fight it, or leave before I hurt you.' His form flickers between man and monster.*",
                        choices: [
                            { text: "Stay and fight for him", next: 25, stats: { love: 20, trust: 20 } },
                            { text: "Leave for your safety", next: 17, stats: { fear: 10, love: -15 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*He catches you sneaking out. 'You were going to leave me... again. Just like her.' The curse takes over completely. He's no longer the man you knew. Run!*",
                        choices: [
                            { text: "Try to reason with him", next: 31, stats: { love: 10, fear: 20 } },
                            { text: "Run away", next: 14, stats: { fear: 25, love: -20 } }
                        ]
                    },
                    {
                        npc: "Adrian",
                        text: "*The mirror shatters. The curse explodes outward and dissipates. You're both thrown back, then... silence. Adrian is alive, warm, breathing. You're still yourself. Free. Together. Truly free.*",
                        choices: []
                    },
                    {
                        npc: "Adrian",
                        text: "*In the mirror, you see the truth: Adrian was cursed because he WAS a monster. But your love changed him. The mirror shows his redemption. The curse breaks, but you're bound by choice now—choosing love over fear.*",
                        choices: []
                    },
                    {
                        npc: "Adrian",
                        text: "*'Please,' he begs, fighting the curse. 'Remember who I am, not what I'm becoming!' Your words cut through. Light breaks through darkness. He collapses, human again, freed by your unwavering faith in him.*",
                        choices: []
                    }
                ],
                endings: [
                    { // Ending 0: Abandoned Him
                        title: "Ending: Eternal Solitude",
                        text: "You escaped the mansion, but Adrian's sorrowful face haunts your every dream. You're free, but guilt chains your heart. In quiet moments, you wonder... what if you had stayed? Some say the mansion still stands, waiting. They say a lonely figure watches from the window. Forever.",
                        condition: (s) => s.love < 30 && s.trust < 30 && s.fear > 40
                    },
                    { // Ending 1: Regret
                        title: "Ending: Hollow Freedom",
                        text: "You left through that door and never looked back. But freedom tastes bitter. In mirrors and shadows, you glimpse him—always watching, never judging. You're alive, but something essential died in that mansion. The piece of your heart that dared to love the impossible.",
                        condition: (s) => s.love < 40 && s.fear < 50 && s.trust < 40
                    },
                    { // Ending 2: Trapped Together
                        title: "Ending: Eternal Twilight",
                        text: "The curse didn't break—it expanded. Now you both exist between worlds, neither alive nor dead. But you're together. In the twilight realm, you have each other. Forever is a long time, but with him, it doesn't seem so frightening. Love transcends mortality.",
                        condition: (s) => s.love > 50 && s.trust > 40 && s.fear > 30
                    },
                    { // Ending 3: True Freedom
                        title: "Ending: Love's Triumph",
                        text: "The curse shattered like glass. Adrian is alive—truly alive. His heart beats, his skin is warm. You did the impossible together. Hand in hand, you walk out of the mansion into the sunrise. A new life awaits. Love conquered death itself.",
                        condition: (s) => s.love > 70 && s.trust > 60 && s.fear < 40
                    },
                    { // Ending 4: Sacrifice
                        title: "Ending: The Trade",
                        text: "He lives. You... exist. You traded your mortality for his freedom. Now you're the ghost in the mansion, watching him live the life you gave him. He visits every day, brings you flowers, talks for hours. It hurts beautifully. Your sacrifice was love's ultimate expression.",
                        condition: (s) => s.love > 80 && s.trust > 50
                    },
                    { // Ending 5: Redemption
                        title: "Ending: Love's Redemption",
                        text: "The mirror revealed the truth—Adrian wasn't innocent, but your love redeemed him. The curse breaks not through magic, but through genuine transformation. He's free because you believed in who he could become, not who he was. Together, you walk into an uncertain but hopeful future.",
                        condition: (s) => s.love > 60 && s.trust > 70 && s.fear < 30
                    },
                    { // Ending 6: Doubt's Price
                        title: "Ending: What Could Have Been",
                        text: "Your hesitation cost everything. Adrian vanished into darkness, and the mansion collapsed. You survived, but the weight of 'what if' crushes you daily. In your nightmares, he asks: 'Why didn't you believe?' You have no answer. Some chances come only once.",
                        condition: (s) => s.love < 60 && s.trust < 50 && s.fear > 35
                    },
                    { // Ending 7: Monster Unleashed
                        title: "Ending: The Curse Wins",
                        text: "The curse consumed him completely. The Adrian you knew is gone, replaced by a creature of shadow and rage. You barely escaped with your life. Sometimes, on stormy nights, you hear him howling your name. A reminder that some loves destroy rather than save.",
                        condition: (s) => s.fear > 60 && s.trust < 30
                    },
                    { // Ending 8: Mutual Understanding
                        title: "Ending: Beautiful Friendship",
                        text: "You broke the curse, not with romance, but with understanding. Adrian is free, and so are you. You're friends bound by an extraordinary experience. No kiss, no eternal vow—just two souls who saw each other truly. Sometimes, that's the most powerful magic of all.",
                        condition: (s) => s.trust > 60 && s.love < 60 && s.fear < 40
                    },
                    { // Ending 9: Faith Unshaken
                        title: "Ending: Unwavering Faith",
                        text: "When Adrian became a monster, you didn't flee. You spoke his name, reminded him who he was. Your faith never wavered. That faith broke the curse more surely than any spell. He's free because you never stopped believing. Love is seeing someone at their worst and choosing them anyway.",
                        condition: (s) => s.love > 65 && s.trust > 80 && s.fear > 45
                    }
                ]
            },
            id: {
                scenes: [
                    {
                        npc: "???",
